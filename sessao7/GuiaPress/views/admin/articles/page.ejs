<%- include ('../../partials/header.ejs'); %> 
<%- include ('../../partials/homenavbar.ejs');%>
<div class="container"> 
    <!--Aqui foi utilizado a propriedade rows pois no controller
    utilizamos o método findAllCount() que retorna o número total
de elementos e as rows. Alem disso foi passado os articles e o
count para a variável results--> 
  <% results.articles.rows.forEach(article=>{ %>
  <div style="margin-top: 10px" class="card">
    <div class="card-header"><%=article.title%></div>
    <div class="card-body">
      <a class="btn btn-success" href="/<%= article.slug%>">Ler Artigo</a>
    </div>
  </div>
  <% }); %>
  <!--paginação-->
  <div style="margin-top: 10px;" class="row">
    <div class="col col-12">
      <!--calculando link para a próxima página utilizando 
      a varivel result passada pelo controller, será verificado
      tambem se existe uma página anterior-->
      <% if(results.page >2 ){ %> 
        <a href="/articles/page/<%=results.page - 1%>" style="float: left;"><<< Previous</a>
      <%}else if(results.page == 2){%>
        <a href="/" style="float: left;"><<< Previous</a>
      <%} %>

      <% if(results.next){ %> 
        <a href="/articles/page/<%=results.page + 1%>" style="float: right;">Next >>></a>
      <%} %>
      
    </div>
    <hr>
  </div>
  <hr>
</div>
<%- include ('../../partials/footer.ejs');%>
